<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="计算机图形学课程">
        
        <link rel="canonical" href="https://hashixuehua.github.io/geometry/13%20draw%20line%20and%20intro%20of%20framework%20system/">
        <link rel="shortcut icon" href="../img/favicon.ico">

	<title>13 介绍框架体系并绘制线 - Computer Graphics</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../css/base.css" rel="stylesheet">
        <link href="../css/style.css" rel="stylesheet">
        <link href="../css/admonition_fix.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
          ga('create', 'UA-80323542-1', 'auto');
          ga('send', 'pageview');
        </script>
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="..">Computer Graphics</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="..">主页</a>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">目录 <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
<li >
    <a href="../00%20about%20the%20course/">课程介绍</a>
</li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" class="nav-title">基础篇</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../01%20setup%20the%20development%20environment/">01 开发环境搭建</a>
</li>

        
            
<li >
    <a href="../02%20hello%20Widget/">02 hello Widget</a>
</li>

        
            
<li >
    <a href="../03%20about%20OpenGL/">03 关于OpenGL</a>
</li>

        
            
<li >
    <a href="../04%20hello%20Triangle/">04 Hello Triangle</a>
</li>

        
            
<li >
    <a href="../05%20coordinate%20system/">05 坐标系统</a>
</li>

        
            
<li >
    <a href="../06%20add%20camera/">06 添加相机</a>
</li>

        
            
<li >
    <a href="../07%20principle%20of%20camera/">07 相机原理</a>
</li>

        
            
<li >
    <a href="../08%20use%20of%20vcpkg/">08 关于vcpkg的使用</a>
</li>

        
    </ul>
  </li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" class="nav-title">场景搭建</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../09%20draw%20default%20work%20plane/">09 默认工作平面</a>
</li>

        
            
<li >
    <a href="../10%20add%20view%20cube/">10 添加视图立方体</a>
</li>

        
            
<li >
    <a href="../11%20add%20label%20of%20rotate%20center/">11 添加旋转中心标识</a>
</li>

        
            
<li >
    <a href="../12%20UI%20-%20add%20toolBar%20button/">12 UI：添加工具栏按钮</a>
</li>

        
    </ul>
  </li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" class="nav-title">交互和绘制</a>
    <ul class="dropdown-menu">
        
            
<li class="active">
    <a href="./">13 介绍框架体系并绘制线</a>
</li>

        
            
<li >
    <a href="../14%20draw%20curve/">14 其它类型线的绘制</a>
</li>

        
            
<li >
    <a href="../15%20draw%20image/">15 图片绘制</a>
</li>

        
            
<li >
    <a href="../16%20add%20snap%20label/">16 添加捕捉吸附标识</a>
</li>

        
    </ul>
  </li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" class="nav-title">操作和设置</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../17%20add%20some%20components%20to%20scene/">17 添加一些组件</a>
</li>

        
            
<li >
    <a href="../18%20selected%20effect/">18 选中效果</a>
</li>

        
            
<li >
    <a href="../19%20set%20work%20plane/">19 设置工作平面</a>
</li>

        
            
<li >
    <a href="../20%20box%20select/">20 框选选择</a>
</li>

        
            
<li >
    <a href="../21%20copy/">21 复制</a>
</li>

        
            
<li >
    <a href="../22%20delete/">22 删除</a>
</li>

        
            
<li >
    <a href="../23%20show%20and%20hide%20controls/">23 显隐控制</a>
</li>

        
            
<li >
    <a href="../24%20layer%20management/">24 图层管理</a>
</li>

        
            
<li >
    <a href="../25%20wire%20frame%20mode/">25 线框模式</a>
</li>

        
    </ul>
  </li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" class="nav-title">IO和其它</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../26%20about/">26 关于</a>
</li>

        
            
<li >
    <a href="../27%20file%20open%20and%20save/">27 文件打开和保存</a>
</li>

        
            
<li >
    <a href="../28%20other%20matters/">28 其它事项</a>
</li>

        
    </ul>
  </li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" class="nav-title">高级效果</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../29%20object%20outlining/">29 外轮廓效果</a>
</li>

        
            
<li >
    <a href="../30%20anti%20aliasing/">30 抗锯齿</a>
</li>

        
    </ul>
  </li>

                    
                        
  <li class="dropdown-submenu">
    <a tabindex="-1" class="nav-title">补充</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../31%20supplement%20-%20zoom%20with%20mouse%20hover%20as%20center/">31 以鼠标点为中心缩放</a>
</li>

        
    </ul>
  </li>

                    
                    </ul>
                </li>
            
            
            
                <li >
                    <a href="../code_repo/">课程代码</a>
                </li>
            
            
            
                <li >
                    <a href="../intro/">CGLib</a>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> 搜索
                    </a>
                </li>
                <li >
                    <a rel="next" href="../12%20UI%20-%20add%20toolBar%20button/">
                        <i class="fa fa-arrow-left"></i> 上一节
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../14%20draw%20curve/">
                        下一节 <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/hashixuehua/geometry">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
                <li>
                    <a href="https://mp.weixin.qq.com/s/KRMuyvCr70Nuw5ZW0HWasw">
                        公众号：哈市雪花
                    </a>
                </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#13draw-line">13.Draw line以及框架体系介绍</a></li>
        
            <li><a href="#131drawinglinesholder">13.1.DrawingLinesHolder</a></li>
        
            <li><a href="#132drawingviewerelemholder">13.2.DrawingViewerElemHolder</a></li>
        
            <li><a href="#133model">13.3.Model</a></li>
        
            <li><a href="#134previewdata">13.4.PreviewData</a></li>
        
            <li><a href="#135viewercommand">13.5.ViewerCommand</a></li>
        
            <li><a href="#136camera">13.6.Camera</a></li>
        
            <li><a href="#137">13.7.总结</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="13draw-line">13.Draw line以及框架体系介绍</h1>
<div class="admonition note">
<p class="admonition-title">提示：</p>
<p>作者在<code>视频课程</code>中对本章内容有详细的批注讲解，包括原理和代码逻辑，欢迎观看。</p>
</div>
<p>本节课程内容较多，同时引入了<code>PreviewData</code>、<code>Command</code>、<code>DrawingLinesHolder</code>、<code>DrawingViewerElemHolder</code>等状态设置或绘制管理类，同时丰富了相关工具函数类，当前的框架体系图和模块逻辑关系图如下。</p>
<p><img src="../img/cad/image-50.png" alt="框架体系图" width="500" align="middle" style="display: block; margin-left: auto; margin-right: auto;"/></p>
<figcaption style="text-align: center;">图：框架体系图</figcaption>

<p><img src="../img/cad/image-relation.png" alt="模块逻辑关系图" width="700" align="middle" style="display: block; margin-left: auto; margin-right: auto;"/></p>
<figcaption style="text-align: center;">图：模块逻辑关系图</figcaption>

<p>为便于讲解，同时又能有完整的功能效果，接下来将会先逐级铺垫相关内容，最后再组合连接，展示效果。</p>
<h2 id="131drawinglinesholder">13.1.DrawingLinesHolder</h2>
<p><code>DrawingLinesHolder</code>是线数据管理和绘制类，我们先来看<code>DrawingLinesHolder</code>主要的的public函数调用逻辑图，</p>
<p><img src="../img/cad/image-51.png" alt="<code>DrawingLinesHolder</code>接口调用逻辑" width="600" align="middle" style="display: block; margin-left: auto; margin-right: auto;"/></p>
<figcaption style="text-align: center;">图：`DrawingLinesHolder`接口调用逻辑</figcaption>

<ol>
<li><code>BeginToDrawLines</code>和<code>EndOfDrawingLine</code>是成对出现的，当开始drawCurve时需要（通过<code>Model</code>类对象）调用<code>BeginToDrawLines</code>进行初始化配置，当结束绘制时（<code>ESC</code>按键）需要调用<code>EndOfDrawingLine</code>进行收尾处理；</li>
<li><code>GetSnapPoint</code>，如果在绘制过程中预览时开启了点捕捉，会调用该方法尝试获取捕捉点并更新，毕竟在类中管理着线数据，包括关联的关键点，如端点、中点等。</li>
<li><code>pushCurveData</code>，想象一下怎么把有效绘制过程的数据传递过来呢？在绘制操作（鼠标点击、参数命令输入执行）有效时，<code>ViewerCommand</code>会处理这些操作并返回对应数据，然后调用<code>Model</code>的<code>AddVertexToLines</code>，进而调用<code>PreviewData</code>的<code>addPara</code>添加绘制参数，当其<code>complete</code>标识为<code>true</code>时会调用其<code>getCompleteLines</code>以获取对应的线数据，将线数据<code>pushCurveData</code>进<code>DrawingLinesHolder</code>中，为后续的<code>DrawLines</code>提供最新的线数据；</li>
<li><code>DrawLines</code>，将最新的线数据以及预览的线数据（通过<code>PreviewData</code>的<code>getPreviewLines</code>获取）绘制到<code>GLView</code>中；</li>
<li><code>DrawSelectedLines</code>，以不同的效果绘制选中状态的线数据，这样在<code>GLView</code>中被选中的线会以<code>选中效果</code>展示。</li>
</ol>
<p>到现在应该了解了<code>DrawingLinesHolder</code>的运行机制，接下来我们来看关键的内部实现。</p>
<ol>
<li><code>map&lt;PointData_1e_3, vector&lt;CurveData*&gt;&gt; lines</code>，线数据是以所在工作平面的法向分类的；而<code>CurveData</code>中的<code>vertex</code>数组元素是每两个作为一条线段；</li>
<li><code>DrawLines</code>，先按照图层Layer进行分类并绘制，这样每一批的颜色是一样的；在绘制时根据线数据进行<code>setupLines</code>（数据和渲染桥梁VAO/VBO/EBO的配置），然后绘制；</li>
</ol>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<ul>
<li>根据颜色进行分批绘制可以提高绘制效率，因为总的绘制批次要少；</li>
<li>由于线数据是可能频繁变化的（通过交互来绘制、删除、选中等），所以在每个渲染循环中都要进行<code>setup</code>和<code>draw</code>，这样效率较低，而提高效率的思路之一是根据图层或空间划分瓦片进行数据组织，每个渲染循环中只重新<code>setup</code>（相比上一个渲染循环）有变化的数据块，这样没有变化的数据块仅<code>draw</code>即可。</li>
</ul>
</div>
<p>当然选中状态的线索引、节点数据、工作平面等，可自行根据上述执行逻辑熟悉。</p>
<h2 id="132drawingviewerelemholder">13.2.DrawingViewerElemHolder</h2>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>本节对此前工作平面相关数据构建和绘制内容进行了抽象和封装，封装成了<code>DrawingViewerElemHolder</code>类。</p>
</div>
<p><code>DrawingViewerElemHolder</code>是viewer元素管理和绘制类，管理和绘制如工作平面、viewCube、旋转中心标识等viewer元素。</p>
<p>我们来看public函数的调用逻辑图，</p>
<p><img src="../img/cad/image-52.png" alt="<code>DrawingViewerElemHolder</code>接口调用逻辑" width="600" align="middle" style="display: block; margin-left: auto; margin-right: auto;"/></p>
<figcaption style="text-align: center;">图：`DrawingViewerElemHolder`接口调用逻辑</figcaption>

<ol>
<li><code>GetViewCubeBody</code>，意如其名，当鼠标点击事件触发时，需要判断viewCube是否被点中，就需要（通过<code>Model</code>）调用<code>DrawingViewerElemHolder</code>的该函数获取viewCube的几何体，进一步射线相交判断是否是否击中以及击中的哪个面，进而决定是否进行视图切换以及切换到哪个视图；</li>
<li><code>drawWorkPlane</code>和<code>drawViewElement</code>将对应viewer元素绘制到<code>GLView</code>中，其中<code>drawViewElement</code>可以根据传参的不同而绘制<code>viewCube</code>或<code>mouseRotateLabel</code>。</li>
</ol>
<p>由于viewer元素是相对固定的，大部分时候我们只需要根据固定的数据<code>setup</code>一次，然后在每个渲染循环中不断的取<code>draw</code>即可；当然当有需要去设置工作平面时，我们再去对应的用新数据<code>setup</code>工作平面。</p>
<h2 id="133model">13.3.Model</h2>
<p><code>Model</code>类我们比较熟悉，本节经过重构之后丰富了其功能，我们也一起梳理下它的结构和运行机制。</p>
<p>我们来看public函数的调用逻辑，</p>
<p><img src="../img/cad/image-53.png" alt="<code>Model</code>接口调用逻辑" width="600" align="middle" style="display: block; margin-left: auto; margin-right: auto;"/></p>
<figcaption style="text-align: center;">图：`Model`接口调用逻辑</figcaption>

<ol>
<li><code>BeginToDrawLines</code>、<code>EndOfDrawingLine</code>是成对出现的，当开始drawCurve时需要调用<code>BeginToDrawLines</code>进行初始化配置，当结束绘制时（<code>ESC</code>按键）需要调用<code>EndOfDrawingLine</code>进行收尾处理；其具体实现以来<code>DrawingLinesHolder</code>类。</li>
<li><code>GetViewCubeBody</code>在上节中已经讲过，在判断是否点击了<code>viewCube</code>时会调用获取几何数据；</li>
<li><code>AddVertexToLines</code>，<code>ViewerCommand</code>会处理各种绘制操作，识别并处理有效的操作并返回对应数据传递给<code>Model</code>（通过调用该函数）,进行传递给<code>PreviewData</code>......请回顾上节课程吧；</li>
<li><code>SetPreviewNextPoint</code>，为了实现绘制状态下鼠标移动时的预览效果，需要（在<code>GLView</code>中的<code>updatePreviewNextPoint</code>）调用该函数并结合<code>DrawingLinesHolder</code>的<code>GetSnapPoint</code>更新数据，传递给<code>PreviewData</code>的<code>previewNextPt</code>，进而在在此后的<code>DrawLines</code>（<code>DrawingLinesHolder</code>）中绘制预览效果；</li>
<li><code>Draw2</code>和<code>DrawViewElement</code>进行线数据、视图元素的绘制；注意随着课程的深入它们的功能会进一步的丰富。</li>
</ol>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>注意随着课程的深入它们的功能会进一步的丰富，一起探索吧~</p>
</div>
<p>到这里大家基本上理解了<code>Model</code>类的作用是场景数据的管理和绘制，它会与<code>ViewerSetting</code>、<code>PreviewData</code>进行联动和状态设置，调用<code>DrawingLinesHolder</code>、<code>DrawingViewerElemHolder</code>来具体实现。</p>
<h2 id="134previewdata">13.4.PreviewData</h2>
<p><code>PreviewData</code>负责效果预览和完成的数据处理，处理和组织预览数据并在达到完成条件时生成结果数据（通过<code>getCompleteLines</code>）更新到<code>DrawingLinesHolder</code>中。</p>
<p><code>PreviewData</code>为<code>Model</code>和<code>GLView</code>类提供状态数据的处理和更新，从这个角度来说它时辅助类。</p>
<p>我们来看其public函数的调用逻辑，</p>
<p><img src="../img/cad/image-54.png" alt="<code>PreviewData</code>接口调用逻辑" width="600" align="middle" style="display: block; margin-left: auto; margin-right: auto;"/></p>
<figcaption style="text-align: center;">图：`PreviewData`接口调用逻辑</figcaption>

<ol>
<li><code>previewNextPt</code>字段，在上文中介绍过，该字段通过上接鼠标移动事件实现预览位置数据的不断更新，进而通过<code>getPreviewLines</code>向<code>DrawingLinesHolder</code>提供预览线数据以绘制；</li>
<li><code>addPara</code>，在上文中介绍过，通过承接<code>ViewerCommand</code>传递过来的有效绘制数据进行预览效果和完成效果数据的组织，进而向<code>DrawingLinesHolder</code>提供线数据以绘制；</li>
<li><code>update</code>，在每次达到complete状态后进行当前数据的更新，如多段线绘制时不断更新当前起点数据；</li>
<li><code>getCompleteLines</code>和<code>getPreviewLines</code>均已介绍过~</li>
<li><code>GetCurLastValidPoint</code>，向<code>ViewerCommand</code>提供最新的有效数据，以方便根据命令进行有效操作的处理，生成对应数据；如处理“输入偏移”生成目标点数据时。</li>
</ol>
<p>到现在应该了解了<code>PreviewData</code>的运行机制，接下来我们来看关键的内部实现。</p>
<ol>
<li><code>addPara</code>添加参数后判断<code>complete</code>字段是否为true；</li>
<li><code>getLines</code>,根据数据组织构造对应线数据，如预览或完成的线、矩形、圆弧、圆等数据，构造的线数据都是线段样式的；以来<code>CGLib</code>进行坐标转换、圆弧离散等操作。</li>
</ol>
<p>详细的实现细节需要大家看代码进行熟悉，由于课程时间和精力有限博主不在这里过多絮叨~，有问题或疑问请留言或联系我。</p>
<h2 id="135viewercommand">13.5.ViewerCommand</h2>
<p><code>ViewerCommand</code>是参数命令驱动系统，负责处理绘制状态下的交互操作，包括鼠标点击、命令和参数输入等操作，识别有效的操作并返回数据传递给<code>Model</code>进行进一步的绘制数据处理。</p>
<p><code>ViewerCommand</code>核心是命令节点的网状结构，允许一个节点链接一到多个节点及复杂链接的循环指向。如三点定圆命令结构如下，</p>
<p><img src="../img/cad/image-55.png" alt="三点定圆方式圆弧网状结构命令节点" width="500" align="middle" style="display: block; margin-left: auto; margin-right: auto;"/></p>
<figcaption style="text-align: center;">图：三点定圆方式圆弧网状结构命令节点</figcaption>

<p>从根节点出发，每个层级的几点通过处理不同类型的命令和参数，生成同样意义的数据，如果这些命令和参数有效的话。如可以选择通过<code>pick point</code>[S]、<code>input coordinate value</code>[N]、<code>input offset base current point</code>[O]不同形式来确定<code>node0 of Arc</code>。</p>
<p>绘制矩形命令结构如下，</p>
<p><img src="../img/cad/image-56.png" alt="矩形绘制网状结构命令节点" width="600" align="middle" style="display: block; margin-left: auto; margin-right: auto;"/></p>
<figcaption style="text-align: center;">图：矩形绘制网状结构命令节点</figcaption>

<p>接下来我们来看其public函数的调用逻辑，</p>
<p><img src="../img/cad/image-57.png" alt="<code>ViewerCommand</code>接口调用逻辑" width="500" align="middle" style="display: block; margin-left: auto; margin-right: auto;"/></p>
<figcaption style="text-align: center;">图：`ViewerCommand`接口调用逻辑</figcaption>

<ol>
<li><code>ActiveCommand</code>，当进入绘制状态时激活对应的绘制命令；</li>
<li><code>OnKeyEnterDown</code>和<code>OnMouseLeftDown</code>功能相近，当相关操作（按键、点击）触发时调用执行，而后<code>ViewerCommand</code>会识别和处理这些操作，将其中有效操作按照当前命令节点进行处理返回对应绘制数据，而后传递给<code>Model</code>，最终通过预览或完成效果展示在<code>GLView</code>中；</li>
<li><code>GetCommandStatus</code>，每次有效操作处理后调用该函数获取下一步的命令提示，（在<code>GLView</code>中通过<code>GLWindow</code>的调用回调函数）将提示显示在<code>GLWindow</code>的状态栏中，引导用户继续操作。</li>
</ol>
<p>相信大家已经对基本的体系结构和运行机制熟悉了，如果想了解详细的实现细节需要大家看代码进行熟悉。</p>
<p>由于课程时间和精力有限，作者不在这里过多絮叨~，有问题或疑问请留言或联系我。</p>
<h2 id="136camera">13.6.Camera</h2>
<p>此前将结果<code>Camera</code>类的详细实现，相信大家对此不陌生，本节我们一起回顾下其运行机制。</p>
<p>我们来看其public函数的调用逻辑，</p>
<p><img src="../img/cad/image-58.png" alt="<code>Camera</code>接口调用逻辑" width="600" align="middle" style="display: block; margin-left: auto; margin-right: auto;"/></p>
<figcaption style="text-align: center;">图：`Camera`接口调用逻辑</figcaption>

<ol>
<li><code>GetViewMatrix</code>，在<code>GLView</code>的<code>paintGL</code>中调用获取模型的观察空间转换矩阵，随后传递到顶点着色器中；</li>
<li><code>GetViewMatrix4VieweCube</code>，在<code>GLView</code>的<code>paintGL</code>中调用获取<code>viewCube</code>的观察空间转换矩阵，随后传递到顶点着色器中；</li>
<li><code>GetViewMatrix4MouseLabel</code>，在<code>GLView</code>的<code>paintGL</code>中调用获取旋转中心标识的观察空间转换矩阵，随后传递到顶点着色器中；</li>
<li><code>handle</code>，在<code>GLView</code>事件触发时调用，其处理有效的交互操作，如平移、缩放、旋转、漫游等；</li>
<li><code>FitView</code>，在<code>GLView</code>事件中发生<code>viewCube</code>的有效的点击时调用，进行视图的快速切换。</li>
</ol>
<p>好了，详细的实现细节需要大家看代码进行回顾~</p>
<h2 id="137">13.7.总结</h2>
<p><img src="../img/cad/image-50.png" alt="框架体系图" width="500" align="middle" style="display: block; margin-left: auto; margin-right: auto;"/></p>
<figcaption style="text-align: center;">图：框架体系图</figcaption>

<p><img src="../img/cad/image-59.png" alt="框架接口调用逻辑（当前）" width="600" align="middle" style="display: block; margin-left: auto; margin-right: auto;"/></p>
<figcaption style="text-align: center;">图：框架接口调用逻辑（当前）</figcaption>

<p>一起回顾下当前的逻辑关系图和接口调用逻辑体系，虽然到当前章节还没有实现过多的功能，但我们项目的框架体系已经逐渐搭建起来，还会随着课程的深入而不断丰富，一起感受技术和架构的魅力~</p>

<div id="disqus_thread"></div>
<script>
    (function() {
        var d = document, s = d.createElement('script');

        s.src = '//cglib.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>请启用JavaScript以浏览<a href="https://disqus.com/?ref_noscript" rel="nofollow">Disqus评论。</a></noscript></div>
        </div>

        <footer class="col-md-12">
            <hr>
            
            <center>Powered by <a href="http://www.mkdocs.org/">MkDocs</a> and <a href="http://bootswatch.com/yeti/">Yeti</a></center>
        </footer>

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script>var base_url = '..';</script>
        <script src="../js/base.js"></script>
        <script src="../mathjax/MathJax.js?config=TeX-AMS_HTML"></script>
        <script src="../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">关闭</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">搜索</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            请在下面输入你要搜索的文本（仅支持英文）：
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="搜索..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>